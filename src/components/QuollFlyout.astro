---
const icons = [
  { emoji: "ðŸŽ§", label: "Music", href: "/music" },
  { emoji: "ðŸ“º", label: "TV", href: "/tv" },
  { emoji: "ðŸ’¡", label: "Ideas", href: "/ideas" },
  { emoji: "â˜•", label: "Break", href: "/break" }
];
---

<style>
  .quoll-container {
    display: flex;
    justify-content: flex-end;
    align-items: start;
    grid-column: span 1;
    padding: 1rem;
    z-index: 1000;
  }
.quoll-icon {
  width: 80px;
  height: 80px;
  border-radius: 50%; /* Optional: remove this if you want a square or custom shape */
  background: url('{`${import.meta.env.BASE_URL}images/quoll-hover.svg`}') center/cover no-repeat;
  /* border: 2px solid #fff; */ /* comment this out or remove */
  cursor: pointer;
  position: relative;
  z-index: 2;
}
  .status-icon {
    position: absolute;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #fdd835;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    pointer-events: none;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%) scale(0);
    transition: transform 0.3s ease, opacity 0.3s ease;
    z-index: 1;
  }
  .status-icon span {
    color: #000;
    font-size: 14px;
  }
  .quoll-container.active .status-icon {
    opacity: 1;
    pointer-events: auto;
    transform: translate(-50%, -50%) scale(1) translate(var(--x), var(--y));
  }
</style>

<div class="quoll-container" onclick="this.classList.toggle('active')">
  <div
    class="quoll-icon"
    style={`background-image: url('${import.meta.env.BASE_URL}images/quoll-hover.svg')`}
  ></div>
  {icons.map((icon) => (
    <a class="status-icon" href={icon.href}><span>{icon.emoji}</span></a>
  ))}
</div>

<script is:inline>
  const icons = document.querySelectorAll('.status-icon');
  const radius = 90;
  const startAngle = 190;
  const endAngle = 80;
  const steps = icons.length - 1;

  icons.forEach((icon, i) => {
    const angleDeg = startAngle - i * ((startAngle - endAngle) / steps);
    const angleRad = angleDeg * (Math.PI / 180);
    const x = radius * Math.cos(angleRad);
    const y = radius * Math.sin(angleRad);
    icon.style.setProperty('--x', `${x}px`);
    icon.style.setProperty('--y', `${y}px`);
  });
</script>